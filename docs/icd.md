# Interface Control Document (ICD) - `svc-cargo`

<center>

<img src="https://github.com/Arrow-air/tf-github/raw/main/src/templates/doc-banner-services.png" style="height:250px" />

</center>

## Overview

This document defines the gRPC and REST interfaces unique to the `svc-cargo` microservice.

Attribute | Description
--- | ---
Status | Draft

## Related Documents

Document | Description
--- | ---
[Requirements - `svc-cargo`](https://docs.google.com/spreadsheets/d/1OliSp9BDvMuVvGmSRh1z_Z58QtjlSknLxGVdVZs2l7A/edit#gid=0) | Requirements for this module
[Software Design Document (SDD)](./sdd.md) | 

## Frameworks

See the Services ICD.

## REST

### Files

The common REST interface OAS definition is located in `svc-cargo-rest.json`.

Code stubs autogenerated from the OAS definition will be located at `svc-cargo-rest.rs`.

### Authentication

See the Services ICD.

### Endpoints

| Endpoint | Type | Arguments | Description |
| ---- | --- | ---- | ---- |
| `/cargo/query` | POST | vertiport_depart_id<br>vertiport_arrive_id<br>timestamp_depart_min<br>timestamp_depart_max<br>cargo_weight_kg | Queries for a flight with the given characteristics
| `/cargo/confirm` | PUT | flight_plan_id | Customer confirmation of a possible flight plan
| `/cargo/cancel` | DELETE | flight_plan_id | Cancel a flight plan
| `/cargo/vertiports` | POST | latitude, longitude | Get vertiports for a user


## gRPC

### Files

These interfaces are defined in a protocol buffer file, [`svc-cargo-grpc.proto`](../proto/svc-cargo-grpc.proto).

### Integrated Authentication & Encryption

See Services ICD.

### gRPC Server Methods ("Services")

gRPC server methods are called "services", an unfortunate name clash with the broader concept of web services.

| Service | Description |
| ---- | ---- |
| `IsReady` | Returns a message indicating if this service is ready for requests.<br>Similar to a health check, if a server is not "ready" it could be considered dead by the client making the request.

### gRPC Client Messages ("Requests")

| Request | Description |
| ------    | ------- |
| `FlightQuery` | A message to the svc-scheduler in particular
